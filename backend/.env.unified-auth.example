# 统一JWT认证系统配置示例
# 复制此文件为 .env 并根据实际情况修改配置

# ===========================================
# JWT 认证配置
# ===========================================

# JWT 密钥 (生产环境请使用强密钥，至少32位)
JWT_SECRET=soybean-admin-jwt-secret-key-change-in-production-environment

# 刷新Token密钥 (生产环境请使用强密钥，至少32位)
REFRESH_TOKEN_SECRET=soybean-admin-refresh-secret-key-change-in-production-environment

# JWT 过期时间 (秒) - 默认2小时
JWT_EXPIRE_IN=7200

# 刷新Token过期时间 (秒) - 默认12小时
REFRESH_TOKEN_EXPIRE_IN=43200

# JWT 签发者
JWT_ISSUER=soybean-admin

# JWT 受众
JWT_AUDIENCE=soybean-admin-client

# ===========================================
# 微服务间认证配置
# ===========================================

# 服务间认证密钥 (生产环境请使用强密钥，至少32位)
SERVICE_SECRET=soybean-admin-service-secret-key-change-in-production-environment

# 最大时间戳差异 (毫秒) - 默认5分钟，防止重放攻击
MAX_TIMESTAMP_DIFF=300000

# 是否启用跨服务认证
ENABLE_CROSS_SERVICE_AUTH=true

# ===========================================
# 安全特性配置
# ===========================================

# 是否启用Token黑名单 (默认启用)
ENABLE_TOKEN_BLACKLIST=true

# 是否启用用户会话管理 (默认启用)
ENABLE_SESSION_MANAGEMENT=true

# Token统计信息缓存时间 (秒) - 默认5分钟
TOKEN_STATS_CACHE_TTL=300

# ===========================================
# Redis 配置 (用于Token管理和缓存)
# ===========================================

# Redis 主机
REDIS_HOST=localhost

# Redis 端口
REDIS_PORT=6379

# Redis 密码 (如果有)
REDIS_PASSWORD=

# Redis 数据库索引
REDIS_DB=0

# Redis 连接超时 (毫秒)
REDIS_CONNECT_TIMEOUT=10000

# Redis 命令超时 (毫秒)
REDIS_COMMAND_TIMEOUT=5000

# ===========================================
# 数据库配置
# ===========================================

# 数据库连接URL
DATABASE_URL="postgresql://username:password@localhost:5432/soybean_admin?schema=public"

# ===========================================
# 应用配置
# ===========================================

# 应用端口
PORT=3000

# 运行环境
NODE_ENV=development

# 应用名称
APP_NAME=soybean-admin

# 应用版本
APP_VERSION=1.0.0

# ===========================================
# 日志配置
# ===========================================

# 日志级别 (error, warn, info, debug)
LOG_LEVEL=info

# 是否启用控制台日志
ENABLE_CONSOLE_LOG=true

# 是否启用文件日志
ENABLE_FILE_LOG=false

# ===========================================
# CORS 配置
# ===========================================

# 允许的源 (多个用逗号分隔)
CORS_ORIGIN=http://localhost:3200,http://localhost:5173

# 是否允许凭据
CORS_CREDENTIALS=true

# ===========================================
# 限流配置
# ===========================================

# 限流时间窗口 (毫秒)
THROTTLE_TTL=60000

# 限流请求数量
THROTTLE_LIMIT=100

# ===========================================
# 微服务注册配置
# ===========================================

# 当前服务ID (每个微服务应该有唯一的ID)
SERVICE_ID=base-system-service

# 当前服务名称
SERVICE_NAME=base-system

# 服务版本
SERVICE_VERSION=1.0.0

# 服务端点 (多个用逗号分隔)
SERVICE_ENDPOINTS=/api/auth,/api/users,/api/roles,/api/permissions

# 服务能力 (多个用逗号分隔)
SERVICE_CAPABILITIES=authentication,authorization,user-management

# ===========================================
# 监控和健康检查配置
# ===========================================

# 是否启用健康检查
ENABLE_HEALTH_CHECK=true

# 健康检查端点
HEALTH_CHECK_ENDPOINT=/health

# 是否启用指标收集
ENABLE_METRICS=true

# 指标端点
METRICS_ENDPOINT=/metrics

# ===========================================
# 开发和调试配置
# ===========================================

# 是否启用Swagger文档
ENABLE_SWAGGER=true

# Swagger文档路径
SWAGGER_PATH=/api-docs

# 是否启用请求日志
ENABLE_REQUEST_LOG=true

# 是否启用SQL日志
ENABLE_SQL_LOG=false

# ===========================================
# 安全配置
# ===========================================

# 是否启用HTTPS
ENABLE_HTTPS=false

# SSL证书路径 (如果启用HTTPS)
SSL_CERT_PATH=

# SSL私钥路径 (如果启用HTTPS)
SSL_KEY_PATH=

# 是否启用CSRF保护
ENABLE_CSRF=false

# 是否启用Helmet安全头
ENABLE_HELMET=true

# ===========================================
# 缓存配置
# ===========================================

# 默认缓存TTL (秒)
DEFAULT_CACHE_TTL=3600

# 用户信息缓存TTL (秒)
USER_CACHE_TTL=1800

# 权限信息缓存TTL (秒)
PERMISSION_CACHE_TTL=3600

# 角色信息缓存TTL (秒)
ROLE_CACHE_TTL=3600

# ===========================================
# 文件上传配置
# ===========================================

# 最大文件大小 (字节)
MAX_FILE_SIZE=10485760

# 允许的文件类型 (多个用逗号分隔)
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx

# 文件存储路径
FILE_STORAGE_PATH=./uploads

# ===========================================
# 邮件配置 (如果需要)
# ===========================================

# SMTP主机
SMTP_HOST=

# SMTP端口
SMTP_PORT=587

# SMTP用户名
SMTP_USER=

# SMTP密码
SMTP_PASS=

# 发件人邮箱
MAIL_FROM=

# ===========================================
# 第三方集成配置
# ===========================================

# 是否启用第三方登录
ENABLE_THIRD_PARTY_LOGIN=false

# OAuth配置 (如果需要)
OAUTH_CLIENT_ID=
OAUTH_CLIENT_SECRET=
OAUTH_CALLBACK_URL=

# ===========================================
# 性能优化配置
# ===========================================

# 是否启用压缩
ENABLE_COMPRESSION=true

# 是否启用静态文件缓存
ENABLE_STATIC_CACHE=true

# 静态文件缓存时间 (秒)
STATIC_CACHE_TTL=86400

# 是否启用响应缓存
ENABLE_RESPONSE_CACHE=false

# 响应缓存时间 (秒)
RESPONSE_CACHE_TTL=300
