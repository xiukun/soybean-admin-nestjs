# ===========================================
# 统一JWT认证系统配置
# 适用于所有微服务：backend, lowcode-platform-backend, amis-lowcode-backend
# ===========================================

# ===========================================
# JWT 认证配置
# ===========================================

# JWT 访问令牌密钥 (生产环境请使用强密钥，至少32位)
JWT_SECRET=soybean-admin-jwt-secret-key-change-in-production-environment-32chars

# JWT 刷新令牌密钥 (生产环境请使用强密钥，至少32位)
REFRESH_TOKEN_SECRET=soybean-admin-refresh-secret-key-change-in-production-environment-32chars

# JWT 访问令牌过期时间
JWT_EXPIRES_IN=2h

# JWT 刷新令牌过期时间
REFRESH_TOKEN_EXPIRES_IN=7d

# JWT 签发者
JWT_ISSUER=soybean-admin

# JWT 受众
JWT_AUDIENCE=soybean-admin-client

# JWT 算法
JWT_ALGORITHM=HS256

# ===========================================
# 微服务间认证配置
# ===========================================

# 服务间认证密钥 (生产环境请使用强密钥，至少32位)
SERVICE_SECRET=soybean-admin-service-secret-key-change-in-production-environment-32chars

# ===========================================
# 安全特性配置
# ===========================================

# 是否启用Token黑名单 (默认启用)
ENABLE_TOKEN_BLACKLIST=true

# 是否启用用户会话管理 (默认启用)
ENABLE_SESSION_MANAGEMENT=true

# ===========================================
# Redis 配置 (用于Token管理和缓存)
# ===========================================

# Redis 主机
REDIS_HOST=localhost

# Redis 端口
REDIS_PORT=26379

# Redis 密码 (如果有)
REDIS_PASSWORD=

# Redis 数据库索引
REDIS_DB=0

# ===========================================
# 数据库配置
# ===========================================

# 数据库连接URL
DATABASE_URL="postgresql://postgres:password@localhost:25432/soybean_admin?schema=public"
DIRECT_DATABASE_URL="postgresql://postgres:password@localhost:25432/soybean_admin?schema=public"

# ===========================================
# 应用配置
# ===========================================

# 运行环境
NODE_ENV=development

# 应用名称
APP_NAME=soybean-admin

# 应用版本
APP_VERSION=1.0.0

# ===========================================
# 服务端口配置
# ===========================================

# 主后端服务端口
BACKEND_PORT=3000

# 低代码平台后端端口
LOWCODE_PLATFORM_PORT=3001

# Amis低代码后端端口
AMIS_LOWCODE_PORT=3002

# ===========================================
# 日志配置
# ===========================================

# 日志级别 (error, warn, info, debug)
LOG_LEVEL=info

# 是否启用控制台日志
ENABLE_CONSOLE_LOG=true

# 是否启用文件日志
ENABLE_FILE_LOG=false

# ===========================================
# CORS 配置
# ===========================================

# 允许的源 (多个用逗号分隔)
CORS_ORIGIN=http://localhost:3200,http://localhost:5173

# 是否允许凭据
CORS_CREDENTIALS=true

# ===========================================
# 限流配置
# ===========================================

# 限流时间窗口 (毫秒)
THROTTLE_TTL=60000

# 限流请求数量
THROTTLE_LIMIT=100

# ===========================================
# 监控和健康检查配置
# ===========================================

# 是否启用健康检查
ENABLE_HEALTH_CHECK=true

# 健康检查端点
HEALTH_CHECK_ENDPOINT=/health

# 是否启用指标收集
ENABLE_METRICS=true

# 指标端点
METRICS_ENDPOINT=/metrics

# ===========================================
# 开发和调试配置
# ===========================================

# 是否启用Swagger文档
ENABLE_SWAGGER=true

# Swagger文档路径
SWAGGER_PATH=/api-docs

# 是否启用请求日志
ENABLE_REQUEST_LOG=true

# 是否启用SQL日志
ENABLE_SQL_LOG=false

# ===========================================
# 安全配置
# ===========================================

# 是否启用HTTPS
ENABLE_HTTPS=false

# 是否启用CSRF保护
ENABLE_CSRF=false

# 是否启用Helmet安全头
ENABLE_HELMET=true

# ===========================================
# 缓存配置
# ===========================================

# 默认缓存TTL (秒)
DEFAULT_CACHE_TTL=3600

# 用户信息缓存TTL (秒)
USER_CACHE_TTL=1800

# 权限信息缓存TTL (秒)
PERMISSION_CACHE_TTL=3600

# 角色信息缓存TTL (秒)
ROLE_CACHE_TTL=3600

# ===========================================
# 文件上传配置
# ===========================================

# 最大文件大小 (字节)
MAX_FILE_SIZE=10485760

# 允许的文件类型 (多个用逗号分隔)
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx

# 文件存储路径
FILE_STORAGE_PATH=./uploads

# ===========================================
# 性能优化配置
# ===========================================

# 是否启用压缩
ENABLE_COMPRESSION=true

# 是否启用静态文件缓存
ENABLE_STATIC_CACHE=true

# 静态文件缓存时间 (秒)
STATIC_CACHE_TTL=86400

# 是否启用响应缓存
ENABLE_RESPONSE_CACHE=false

# 响应缓存时间 (秒)
RESPONSE_CACHE_TTL=300
