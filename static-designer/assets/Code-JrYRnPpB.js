const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-editor-CFY6VEf7.js","assets/amis-CpcGROCB.js","assets/react-vendor-DeqkGhWy.js","assets/monaco-editor-D3IsZNM0.css"])))=>i.map(i=>d[i]);
import{b as _,d as w,L as x,R as b,be as z,dM as v,a$ as R,$ as L,af as y,b_ as S,h as H,au as M,aq as k}from"./amis-CpcGROCB.js";import"./react-vendor-DeqkGhWy.js";var A=function(m){_(o,m);function o(t){var e=m.call(this,t)||this;return e.toDispose=[],e.codeRef=b.createRef(),e}return o.prototype.shouldComponentUpdate=function(t){return z(o.propsList,this.props,t)||this.resolveLanguage(this.props)!==this.resolveLanguage(t)||v(this.props)!==v(t)},o.prototype.componentDidMount=function(){var t=this;R(()=>import("./monaco-editor-CFY6VEf7.js").then(e=>e.b),__vite__mapDeps([0,1,2,3])).then(function(e){return t.handleMonaco(e)})},o.prototype.componentDidUpdate=function(t){var e,a;return L(this,void 0,void 0,function(){var i,n,r,d,s,u,l;return y(this,function(c){switch(c.label){case 0:return i=this.props,n=this.codeRef.current,!((e=this===null||this===void 0?void 0:this.monaco)===null||e===void 0)&&e.editor&&n?(r=i.tabSize,d=(a=v(this.props))!==null&&a!==void 0?a:"",s=this.resolveLanguage(),u=this.registerAndGetTheme(),this.monaco.editor.setTheme(u),[4,this.monaco.editor.colorize(d,s,{tabSize:r})]):[3,2];case 1:l=c.sent(),n.innerHTML=l,c.label=2;case 2:return[2]}})})},o.prototype.handleMonaco=function(t){var e,a;return L(this,void 0,void 0,function(){var i,n,r,d,s,u;return y(this,function(l){switch(l.label){case 0:return t?(this.monaco=t,i=this.props.tabSize,n=(e=v(this.props))!==null&&e!==void 0?e:"",r=this.resolveLanguage(),d=this.codeRef.current,d&&(!((a=this.monaco)===null||a===void 0)&&a.editor)?(s=this.registerAndGetTheme(),this.monaco.editor.setTheme(s),[4,this.monaco.editor.colorize(n,r,{tabSize:i})]):[3,2]):[2];case 1:u=l.sent(),d.innerHTML=u,l.label=2;case 2:return[2]}})})},o.prototype.resolveLanguage=function(t){var e=t??this.props,a=e.customLang,i=e.data,n=e.language,r=n===void 0?"plaintext":n;return S(r)&&(r=H(r,i)),a&&a.name&&(r=a.name),r},o.prototype.registerAndGetTheme=function(){var t,e,a,i,n=this.monaco,r=this.props,d=r.theme,s=r.editorTheme;if(s=s||(d==="dark"?"vs-dark":"vs"),!n)return s;if(this.customLang&&this.customLang.name&&Array.isArray(this.customLang.tokens)&&this.customLang.tokens.length){var u=this.customLang.name,l=!((a=this.customLang)===null||a===void 0)&&a.colors&&M((i=this.customLang)===null||i===void 0?void 0:i.colors)?this.customLang.colors:{};n.languages.register({id:u});var c=[],f=[];try{for(var g=k(this.customLang.tokens),h=g.next();!h.done;h=g.next()){var p=h.value,C=new RegExp(p.regex,p.regexFlags||void 0);c.push([C,p.name]),f.push({token:p.name,foreground:p.color,background:p.background,fontStyle:p.fontStyle})}}catch(T){t={error:T}}finally{try{h&&!h.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}return n.languages.setMonarchTokensProvider(u,{tokenizer:{root:c}}),n.editor.defineTheme(u,{base:"vs",inherit:!1,rules:f,colors:l}),u}return s},o.prototype.render=function(){var t=v(this.props),e=this.props,a=e.className,i=e.maxHeight,n=e.style,r=n===void 0?{}:n,d=e.classnames,s=e.editorTheme,u=e.customLang,l=e.wordWrap,c=e.wrapperComponent,f=this.resolveLanguage(),g=typeof t=="string"&&t.split(/\r?\n/).length>1,h=c||(g?"pre":"code");return u&&(this.customLang=u),i&&(r.maxHeight=r.maxHeight||i,r.overflow="auto"),b.createElement(h,{ref:this.codeRef,className:d("Code",{"Code--dark":s&&["vs-dark","hc-black"].includes(s),"Code-pre-wrap":h==="pre","word-break":l},a),style:r,"data-lang":f},t)},o.propsList=["language","editorTheme","tabSize","wordWrap","customLang","style"],o.defaultProps={language:"plaintext",tabSize:4,wordWrap:!0},o}(b.Component),E=function(m){_(o,m);function o(){return m!==null&&m.apply(this,arguments)||this}return o=w([x({type:"code"})],o),o}(A);export{E as CodeRenderer,A as default};
