import{b as $,R as m,$ as Q,af as Y,c as g,f as d,b_ as Z,h as ss,dM as as,fw as H,dI as I,fx as es,fy as T,fz as ts,fA as rs,fB as ns,dJ as ls,fC as is,d as f,a1 as v,a2 as p,L as os}from"./amis-WMe1Knp9.js";import"./react-vendor-DeqkGhWy.js";var ps=function(b){$(o,b);function o(n){var s=b.call(this,n)||this;return s.state={currentIndex:0,nextAnimation:""},s.isSwiping=!1,s.startX=0,s.list=[],s.gap=5,s.evenReg=/^even-[1-9]\d*-[1-9]\d*$/,s.defaultWidth=200,s.defaultHeight=112.5,s.wrapperRef=m.createRef(),s.generateHeight=function(e,a){var t=Number(s.props.height)||s.defaultHeight;if(e==="sm-ss-sss-m"||e==="sss-ss-ms-m"||e==="sms-ss-sms-m")return a===0?t:(t-s.gap)*.5;if(e==="sm-ss-sss-ss"||e==="ms-ss-sss-ss"||e==="sss-ss-sm-ss"||e==="mss-ss-ssm-ss"||e==="sss-ss-mm-ss")return(t-s.gap)*.5;if(s.evenReg.test(e||"")){var r=Number(e==null?void 0:e.split("-")[1]),l=Number(e==null?void 0:e.split("-")[2]);if(a<r*l)return(t-s.gap*(r-1))/r}return 0},s.generateWidth=function(e,a){var t=Number(s.props.width)||s.defaultWidth;if(e==="sm-ss-sss-m"||e==="sss-ss-ms-m")return a===0?(t-2*s.gap)/3:a===1?(t-2*s.gap)/3*2+s.gap:(t-2*s.gap)/3;if(e==="sms-ss-sms-m"){if([0,2,4].includes(a))return(t-2*s.gap)/4;if(a===1||a===3)return(t-2*s.gap)/2+s.gap}else{if(e==="sm-ss-sss-ss")return[0,2,3,4].includes(a)?(t-2*s.gap)/3:(t-2*s.gap)/3*2+s.gap;if(e==="ms-ss-sss-ss")return[1,2,3,4].includes(a)?(t-2*s.gap)/3:(t-2*s.gap)/3*2+s.gap;if(e==="sss-ss-sm-ss")return[0,1,2,4].includes(a)?(t-2*s.gap)/3:(t-2*s.gap)/3*2+s.gap;if(e==="mss-ss-ssm-ss")return[1,2,4,5].includes(a)?(t-2*s.gap)/4:(t-2*s.gap)/2+s.gap;if(e==="sss-ss-mm-ss")return[0,1,2].includes(a)?(t-s.gap*2)/3:(t-s.gap)/2;if(s.evenReg.test(e||"")){var r=Number(e==null?void 0:e.split("-")[1]),l=Number(e==null?void 0:e.split("-")[2]);if(a<r*l)return(t-s.gap*(l-1))/l}}return 0},s.generateTranslate=function(e,a){var t=Number(s.props.width)||s.defaultWidth,r=Number(s.props.height)||s.defaultHeight,l={position:"absolute",boxSizing:"content-box",height:s.generateHeight(e,a)+"px",width:s.generateWidth(e,a)+"px"};return e==="sm-ss-sss-m"?a===1?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===2?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)*.5+s.gap,"px)"):a===3&&(l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)*.5+s.gap,"px)")):e==="sss-ss-ms-m"?a===1?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)*.5+s.gap,"px)"):a===2?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===3&&(l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat(0,"px)")):e==="sms-ss-sms-m"?a===1?l.transform="translate(".concat((t-2*s.gap)/4+s.gap,"px,").concat(0,"px)"):a===2?l.transform="translate(".concat((t-2*s.gap)/4*3+3*s.gap,"px,").concat(0,"px)"):a===3?l.transform="translate(".concat((t-2*s.gap)/4+s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(l.transform="translate(".concat((t-2*s.gap)/4*3+3*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="sm-ss-sss-ss"?a===1?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===2?l.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===3?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="ms-ss-sss-ss"?a===1?l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat(0,"px)"):a===2?l.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===3?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="sss-ss-sm-ss"?a===1?l.transform="translate(".concat((t-2*s.gap)/3+s.gap,"px,").concat(0,"px)"):a===2?l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat(0,"px)"):a===3?l.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):a===4&&(l.transform="translate(".concat((t-2*s.gap)/3*2+2*s.gap,"px,").concat((r-s.gap)/2+s.gap,"px")):e==="mss-ss-ssm-ss"?a===1||a===2?l.transform="translate(".concat(((t-2*s.gap)/4+s.gap)*(a+1),"px,").concat(0,"px)"):a===3?l.transform="translate(".concat(0,"px,").concat((r-s.gap)/2+s.gap,"px)"):(a===4||a===5)&&(l.transform="translate(".concat(((t-2*s.gap)/4+s.gap)*(a-2),"px,").concat((r-s.gap)/2+s.gap,"px)")):e==="sss-ss-mm-ss"?a===1||a===2?l.transform="translate(".concat(((t-2*s.gap)/3+s.gap)*a,"px,").concat(0,"px)"):(a===3||a===4)&&(l.transform="translate(".concat(((t-s.gap)/2+s.gap)*(a-3),"px,").concat((r-s.gap)/2+s.gap,"px)")):s.evenReg.test(e||"")&&(l.transform=s.generateEvenTranslate(e,a)),l},s}return o.prototype.getFrameId=function(n){var s=this.state.currentIndex,e=this.list.length;switch(n){case"prev":return(s-1+e)%e;case"next":return(s+1)%e;default:return s}},o.prototype.transitFramesTowards=function(n,s){return Q(this,void 0,void 0,function(){var e;return Y(this,function(a){switch(e=this.state.currentIndex,n){case"left":e=this.getFrameId("next"),s="slideLeft";break;case"right":e=this.getFrameId("prev"),s="slideRight";break;default:return[2]}return this.setState({currentIndex:e,nextAnimation:s}),[2]})})},o.prototype.handleSwipe=function(n){var s=50;Math.abs(n)>s&&(n>0?this.transitFramesTowards("right","slideRight"):this.transitFramesTowards("left","slideLeft"))},o.prototype.handleTouchStart=function(n){this.props.displayMode==="full"&&(this.isSwiping=!0,this.startX=n.touches[0].clientX)},o.prototype.handleTouchEnd=function(n){if(this.isSwiping){var s=n.changedTouches[0].clientX-this.startX;this.handleSwipe(s),this.isSwiping=!1}},o.prototype.handleMouseDown=function(n){this.props.displayMode==="full"&&(n.preventDefault(),this.isSwiping=!0,this.startX=n.clientX,document.addEventListener("mouseup",this.handleMouseUp))},o.prototype.handleMouseUp=function(n){if(this.isSwiping){var s=n.clientX-this.startX;this.handleSwipe(s),this.isSwiping=!1,document.removeEventListener("mouseup",this.handleMouseUp)}},o.prototype.handleEnlarge=function(n){var s=this.props,e=s.onImageEnlarge,a=s.src,t=s.originalSrc;e&&e(g(g({},n),{originalSrc:n.originalSrc||n.src,list:this.list.map(function(r){return{src:a?d(a,r,"| raw"):r&&r.image||r,originalSrc:t?d(t,r,"| raw"):(r==null?void 0:r.src)||d(a,r,"| raw")||(r==null?void 0:r.image)||r,title:r&&(r.enlargeTitle||r.title),caption:r&&(r.enlargeCaption||r.description||r.caption)}})}),this.props)},o.prototype.generateEvenTranslate=function(n,s){var e="",a=Number(this.props.width)||this.defaultWidth,t=Number(this.props.height)||this.defaultHeight,r=Number(n==null?void 0:n.split("-")[1]),l=Number(n==null?void 0:n.split("-")[2]);if(s<r*l){var F=(a-(l-1)*this.gap)/l,A=(t-(r-1)*this.gap)/r,u=Math.floor(s/l),C=s%l,_=C*(F+this.gap),S=u*(A+this.gap);e="translate(".concat(_,"px,").concat(S,"px)")}return e},o.prototype.render=function(){var n=this,s=this.props,e=s.className,a=s.style,t=s.defaultImage,r=s.thumbMode,l=s.thumbRatio,F=s.data;s.name;var A=s.placeholder,u=s.classnames,C=s.source,_=s.delimiter,S=s.enlargeAble,k=s.enlargeWithGallary,w=s.src,M=s.originalSrc,O=s.listClassName,j=s.options,L=s.showToolbar,P=s.toolbarActions,U=s.imageGallaryClassName;s.galleryControlClassName;var y=s.id,V=s.wrapperCustomStyle,B=s.env,N=s.themeCss,x=s.sortType;s.imagesControlClassName;var R=s.displayMode,J=s.fullThumbMode,q=this.state.currentIndex,X,c;return typeof C=="string"&&Z(C)?c=ss(C,F,"| raw")||void 0:Array.isArray(X=as(this.props))||typeof X=="string"?c=X:Array.isArray(j)&&(c=j),typeof c=="string"?c=c.split(_):c&&!Array.isArray(c)&&(c=[c]),this.list=c,this.props.sortType==="sm-ss-sss-m"?this.list=c.slice(0,4):this.props.sortType==="sss-ss-ms-m"?this.list=c.slice(0,5):this.props.sortType==="sms-ss-sms-m"||this.props.sortType==="sm-ss-sss-ss"||this.props.sortType==="ms-ss-sss-ss"||this.props.sortType==="sss-ss-sm-ss"?this.list=c.slice(0,6):this.props.sortType==="mss-ss-ssm-ss"?this.list=c.slice(0,8):this.props.sortType==="sss-ss-mm-ss"&&(this.list=c.slice(0,6)),this.props.sortType?m.createElement("div",{className:x,style:{width:(this.props.width||this.defaultWidth)+"px",height:(this.props.height||this.defaultHeight)+"px"}},this.list.map(function(i,h){return m.createElement(H,{fontStyle:n.props.fontStyle,style:n.generateTranslate(x,h),width:n.generateWidth(x,h),height:n.generateHeight(x,h),hoverMode:n.props.hoverMode||"text-style-4",index:h,className:u("Images-item"),key:h,src:(w?d(w,i,"| raw"):i&&i.image)||i,originalSrc:(M?d(M,i,"| raw"):i&&i.src)||i,title:i&&i.title,sortType:n.props.sortType,caption:i&&(i.description||i.caption),thumbMode:r,thumbRatio:l,enlargeAble:S,enlargeWithGallary:k,onEnlarge:n.handleEnlarge,showToolbar:L,imageGallaryClassName:"".concat(U," ").concat(I(g(g({},n.props),{name:"imageGallaryClassName",id:y,themeCss:N}))," ").concat(I(g(g({},n.props),{name:"galleryControlClassName",id:y,themeCss:N}))),toolbarActions:P})})):m.createElement("div",{ref:this.wrapperRef,className:u("ImagesField",e,R==="full"?"ImagesField--full":"",I(g(g({},this.props),{name:"imagesControlClassName",id:y,themeCss:N})),I(g(g({},this.props),{name:"wrapperCustomStyle",id:y,themeCss:V}))),style:g(g({},a),R==="full"?{height:"auto"}:{}),onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onMouseDown:this.handleMouseDown},Array.isArray(c)?m.createElement("div",{className:u("Images",O)},R==="full"?m.createElement("div",{className:u("Images-container")},c.map(function(i,h){return m.createElement(es,{key:h,in:h===q,timeout:300,mountOnEnter:!0,unmountOnExit:!0},function(z){var E,G,W;z===T&&((W=n.wrapperRef.current)===null||W===void 0||W.childNodes.forEach(function(D){return D.offsetHeight}));var K=(E={},E[T]={opacity:1,transform:"translateX(0)"},E[ts]={opacity:1,transform:"translateX(0)"},E[rs]={opacity:0,transform:n.state.nextAnimation==="slideRight"?"translateX(100%)":"translateX(-100%)"},E[ns]={opacity:0,transform:n.state.nextAnimation==="slideRight"?"translateX(-100%)":"translateX(100%)"},E);return m.createElement("div",{className:u("Images-item"),style:g({position:"absolute",width:"100%",height:"100%",transition:"all 300ms ease-in-out"},K[z])},m.createElement("div",{className:u("Images-itemInner")},m.createElement("img",{className:u("Image-image",(G={},G["Image-image--".concat(J)]=R==="full",G)),src:(w?d(w,i,"| raw"):i&&i.image)||i,alt:i&&i.title,draggable:!1,onDragStart:function(D){return D.preventDefault()}}),m.createElement("div",{className:u("Images-itemIndex")},h+1,"/",c.length)))})})):c.map(function(i,h){return m.createElement(H,{hoverMode:n.props.hoverMode||"text-style-4",fontStyle:n.props.fontStyle,index:h,className:u("Images-item"),key:h,src:(w?d(w,i,"| raw"):i&&i.image)||i,originalSrc:(M?d(M,i,"| raw"):i&&i.src)||i,title:i&&i.title,caption:i&&(i.description||i.caption),thumbMode:r,thumbRatio:l,enlargeAble:S,enlargeWithGallary:k,onEnlarge:n.handleEnlarge,showToolbar:L,imageGallaryClassName:"".concat(U," ").concat(I(g(g({},n.props),{name:"imageGallaryClassName",id:y,themeCss:N}))," ").concat(I(g(g({},n.props),{name:"galleryControlClassName",id:y,themeCss:N}))),toolbarActions:P})})):t?m.createElement("div",{className:u("Images",O)},m.createElement(H,{hoverMode:this.props.hoverMode||"text-style-4",className:u("Images-item"),src:t,thumbMode:r,thumbRatio:l})):A,m.createElement(ls,g({},this.props,{config:{wrapperCustomStyle:V,id:y,themeCss:N,classNames:[{key:"imagesControlClassName"},{key:"galleryControlClassName"}]},env:B})))},o.defaultProps={className:"",delimiter:",",defaultImage:is,placehoder:"-",thumbMode:"cover",thumbRatio:"1:1",displayMode:"thumb",fullThumbMode:"cover"},f([v,p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",void 0)],o.prototype,"getFrameId",null),f([v,p("design:type",Function),p("design:paramtypes",[String,String]),p("design:returntype",Promise)],o.prototype,"transitFramesTowards",null),f([v,p("design:type",Function),p("design:paramtypes",[Number]),p("design:returntype",void 0)],o.prototype,"handleSwipe",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleTouchStart",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleTouchEnd",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleMouseDown",null),f([v,p("design:type",Function),p("design:paramtypes",[MouseEvent]),p("design:returntype",void 0)],o.prototype,"handleMouseUp",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleEnlarge",null),o}(m.Component),ms=function(b){$(o,b);function o(){return b!==null&&b.apply(this,arguments)||this}return o=f([os({type:"images"})],o),o}(ps);export{ps as ImagesField,ms as ImagesFieldRenderer};
