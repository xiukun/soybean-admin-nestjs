import{b as y,dK as C,as as E,$ as _,af as V,R as m,gq as I,d,a1 as f,a2 as p,F as b}from"./amis-WMe1Knp9.js";import"./react-vendor-DeqkGhWy.js";var B=function(s){y(e,s);function e(){var t=s!==null&&s.apply(this,arguments)||this;return t.captchaValid=!1,t}return e.prototype.dispatchEvent=function(t){var r=this.props,a=r.dispatchEvent;r.data;var n=r.value;a(t,C(this.props,{value:n}))},e.prototype.doAction=function(t,r,a){var n,i,o=this.props,h=o.resetValue,c=o.formStore,l=o.store,u=o.name;if(t.actionType==="clear"){this.handleChange("");return}if(t.actionType==="reset"){var v=(i=E((n=c==null?void 0:c.pristine)!==null&&n!==void 0?n:l==null?void 0:l.pristine,u))!==null&&i!==void 0?i:h;this.handleChange(v)}},e.prototype.handleChange=function(t){return _(this,void 0,void 0,function(){var r,a,n,i;return V(this,function(o){switch(o.label){case 0:return r=this.props,a=r.onChange,n=r.dispatchEvent,[4,n("change",{value:t})];case 1:return i=o.sent(),i!=null&&i.prevented?[2]:(a&&a(t),[2])}})})},e.prototype.handleVerify=function(t,r){var a=this.props.formItem;this.captchaValid=t,t?a==null||a.clearError():a==null||a.setError("请输入正确的验证码")},e.prototype.validate=function(){var t,r,a=this.props,n=a.formStore,i=a.data,o=a.formItemDispatchEvent;return(t=o??this.props.dispatchEvent)===null||t===void 0||t(this.captchaValid?"formItemValidateSucc":"formItemValidateError",(r=n==null?void 0:n.data)!==null&&r!==void 0?r:i),this.captchaValid?this.captchaValid:"请输入正确的验证码"},e.prototype.render=function(){var t=this.props,r=t.className,a=t.classnames,n=t.captchaWidth,i=t.captchaHeight,o=t.captchaBgColor,h=t.captchaTextColor,c=t.captchaType,l=t.placeholder,u=t.disabled,v=t.readOnly,g=t.value;return m.createElement("div",{className:a("InputCaptchaBaseControl",r)},m.createElement(I,{captchaWidth:n,captchaHeight:i,captchaBgColor:o,captchaTextColor:h,captchaType:c,placeholder:l,disabled:u,readOnly:v,value:g,onChange:this.handleChange,onVerify:this.handleVerify,classnames:a}))},d([f,p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",void 0)],e.prototype,"dispatchEvent",null),d([f,p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",Promise)],e.prototype,"handleChange",null),d([f,p("design:type",Function),p("design:paramtypes",[Boolean,Number]),p("design:returntype",void 0)],e.prototype,"handleVerify",null),e}(m.Component),S=function(s){y(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e=d([b({type:"input-captcha"})],e),e}(B);export{B as InputCaptchaBaseControl,S as InputCaptchaBaseRenderer};
