import{b as g,Q as R,aZ as u,dM as E,f as i,ae as F,R as c,fQ as D,d as v,a1 as L,a2 as d,dz as S,L as V}from"./amis-CX4p0iDy.js";import"./react-vendor-DeqkGhWy.js";var h=["name","value","data","defaultValue"],W=function(l){g(t,l);function t(e){var a=l.call(this,e)||this;return a.state={value:a.getValue()},a}return t.prototype.componentDidUpdate=function(e){R(u(e,h),u(this.props,h))||this.setState({value:this.getValue()})},t.prototype.getValue=function(){var e=E(this.props);return e=typeof e=="number"?e:i(e,this.props.data),/^\d*\.?\d+$/.test(e)&&(e=parseFloat(e)),e},t.prototype.format=function(e){var a=this.props,s=a.valueTpl,n=a.render,p=a.data;return n("progress-value",s||"${value}%",{data:F(p,{value:e})})},t.prototype.render=function(){var e=this.props,a=e.data,s=e.mode,n=e.className,p=e.style,f=e.placeholder,m=e.progressClassName,y=e.map,b=e.stripe,T=e.animate,P=e.showLabel,_=e.strokeWidth,C=e.gapDegree,w=e.gapPosition;e.classnames;var r=e.threshold,N=e.showThresholdText,x=this.state.value;return r&&(Array.isArray(r)?r.forEach(function(o){o.value=typeof o.value=="string"?i(o.value,a):o.value,o.color&&(o.color=i(o.color,a))}):(r.value=i(r.value,a),r.color&&(r.color=i(r.color,a)))),c.createElement(D,{value:x,type:s,map:y,stripe:b,animate:T,showLabel:P,placeholder:f,format:this.format,strokeWidth:_,gapDegree:C,gapPosition:w,className:n,style:p,progressClassName:m,threshold:r,showThresholdText:N})},t.defaultProps={placeholder:"-",progressClassName:"",progressBarClassName:"",map:["bg-danger","bg-warning","bg-info","bg-success","bg-success"],valueTpl:"${value}%",showLabel:!0,stripe:!1,animate:!1},v([L,d("design:type",Function),d("design:paramtypes",[Number]),d("design:returntype",void 0)],t.prototype,"format",null),t}(c.Component),O=function(l){g(t,l);function t(e,a){var s=l.call(this,e)||this,n=a;return n.registerComponent(s),s}return t.prototype.componentWillUnmount=function(){var e;(e=l.prototype.componentWillUnmount)===null||e===void 0||e.call(this);var a=this.context;a.unRegisterComponent(this)},t.prototype.doAction=function(e,a,s,n){var p=e==null?void 0:e.actionType;p==="reset"&&this.setState({value:0})},t.prototype.setData=function(e){(typeof e=="number"||typeof+e=="number")&&this.setState({value:+e})},t.contextType=S,t=v([V({type:"progress"}),d("design:paramtypes",[Object,Object])],t),t}(W);export{W as ProgressField,O as ProgressFieldRenderer};
