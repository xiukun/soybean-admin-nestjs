// Auto-generated Prisma schema for 演示项目
// Generated at: 2025-07-21T02:35:56.582Z

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["amis"]
}

model User {
  tenantId String? @map("tenant_id")
  id String @id
  username String @unique
  email String @unique
  password String
  nickname String?
  avatar String?
  status String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")

  // 关联关系
  userRoles UserRole[]

  @@map("demo_users")
  @@schema("amis")
}
model Role {
  tenantId String? @map("tenant_id")
  id String @id
  name String @unique
  code String @unique
  description String?
  status String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")

  // 关联关系
  userRoles UserRole[]

  @@map("demo_roles")
  @@schema("amis")
}

model UserRole {
  id String @id @default(cuid())
  userId String @map("user_id")
  roleId String @map("role_id")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")

  // 关联关系
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  role Role @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([userId, roleId], name: "userId_roleId")
  @@map("demo_user_roles")
  @@schema("amis")
}

model PageTemplate {
  id String @id @default(cuid())
  name String
  description String?
  content String // JSON格式的页面配置
  category String?
  tags String[] // 标签数组
  isPublic Boolean @default(false) @map("is_public")
  status String @default("ACTIVE")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")

  @@map("demo_page_templates")
  @@schema("amis")
}

model TestUser {
  id String @id @unique @default(cuid()) // 用户唯一标识
  username String @unique(map: "test_user_username_key") // 用户登录名
  email String @unique(map: "test_user_email_key") // 用户邮箱地址
  phone String? // 用户手机号码
  realName String? // 用户真实姓名
  age Int? // 用户年龄
  gender String? @default("UNKNOWN") // 用户性别
  birthday DateTime? // 用户生日
  avatar String? // 用户头像链接
  bio String? // 用户个人简介
  isActive Boolean @default(true) // 用户账户是否激活
  lastLoginAt DateTime? // 用户最后登录时间
  settings Json? @default("{}") // 用户个性化配置

  // 系统字段
  createdBy String   @map("created_by") @db.VarChar(36)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedBy String?  @map("updated_by") @db.VarChar(36)
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([username], name: "idx_test_users_username")
  @@index([email], name: "idx_test_users_email")
  @@index([phone], name: "idx_test_users_phone")
  @@index([createdAt], name: "idx_test_users_created_at")

  @@unique([username], name: "uk_test_users_username")
  @@unique([email], name: "uk_test_users_email")

  @@map("test_users")
  @@schema("amis")
}
