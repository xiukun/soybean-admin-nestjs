# å®ä½“å…³ç³»ç®¡ç†å®Œæ•´å¼€å‘æ–¹æ¡ˆ

## é¡¹ç›®æ¦‚è¿°

åŸºäºå½“å‰å®ä½“ç®¡ç†è®¾è®¡å™¨çš„åŸºç¡€ï¼Œå®Œå–„å®ä½“å…³ç³»è¿çº¿åŠŸèƒ½ï¼Œå®ç°å®Œæ•´çš„å¯è§†åŒ–å®ä½“å…³ç³»ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬è‡ªåŠ¨å¸ƒå±€ã€å…³ç³»è¿çº¿ã€å¸ƒå±€ä¿å­˜å’Œæ€§èƒ½ä¼˜åŒ–ã€‚

## å½“å‰çŠ¶æ€åˆ†æ

### âœ… å·²å®ŒæˆåŠŸèƒ½
- [x] åŸºç¡€å®ä½“è®¾è®¡å™¨ç»„ä»¶
- [x] å¢å¼ºç‰ˆå®ä½“è®¾è®¡å™¨ (`EnhancedEntityDesigner.vue`)
- [x] å®ä½“å±æ€§é¢æ¿ (`EntityPropertyPanel.vue`)
- [x] å…³ç³»å±æ€§é¢æ¿ (`RelationshipPropertyPanel.vue`)
- [x] å¤šç§è‡ªåŠ¨å¸ƒå±€ç®—æ³•ï¼ˆåŠ›å¯¼å‘ã€ç½‘æ ¼ã€å±‚æ¬¡ã€åœ†å½¢ï¼‰
- [x] åŸºç¡€æ‹–æ‹½å’Œé€‰æ‹©åŠŸèƒ½
- [x] ç¼©æ”¾å’Œé€‚åº”ç”»å¸ƒåŠŸèƒ½
- [x] TypeScript ç±»å‹ç³»ç»Ÿç»Ÿä¸€

### ğŸ”„ éœ€è¦å®Œå–„çš„åŠŸèƒ½
- [ ] å®ä½“å…³ç³»è¿çº¿å¯è§†åŒ–
- [ ] å…³ç³»åˆ›å»ºå’Œç¼–è¾‘äº¤äº’
- [ ] å¸ƒå±€çŠ¶æ€æŒä¹…åŒ–
- [ ] å¤§é‡å®ä½“æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–
- [ ] å…³ç³»æ•°æ®çš„å‰åç«¯åŒæ­¥

## åç«¯æ¥å£æ¢³ç†

### ç°æœ‰å…³ç³»ç®¡ç†æ¥å£

åŸºäºä»£ç æœç´¢ç»“æœï¼Œåç«¯å·²æœ‰å®Œæ•´çš„å…³ç³»ç®¡ç†æ¨¡å—ï¼š

#### 1. å…³ç³»æŸ¥è¯¢æ¥å£
```typescript
// GET /api/v1/relationships/project/{projectId}
// è·å–é¡¹ç›®ä¸‹æ‰€æœ‰å…³ç³»
interface GetRelationshipsQuery {
  projectId: string;
}

// GET /api/v1/relationships/{id}
// è·å–å•ä¸ªå…³ç³»è¯¦æƒ…
interface GetRelationshipQuery {
  id: string;
}

// GET /api/v1/relationships/graph/{projectId}
// è·å–å…³ç³»å›¾è°±æ•°æ®
interface GetRelationshipGraphQuery {
  projectId: string;
}
```

#### 2. å…³ç³»å‘½ä»¤æ¥å£
```typescript
// POST /api/v1/relationships
// åˆ›å»ºæ–°å…³ç³»
interface CreateRelationshipCommand {
  projectId: string;
  sourceEntityId: string;
  targetEntityId: string;
  type: 'ONE_TO_ONE' | 'ONE_TO_MANY' | 'MANY_TO_MANY';
  name: string;
  description?: string;
  sourceFieldName: string;
  targetFieldName: string;
  cascadeAction: 'RESTRICT' | 'CASCADE' | 'SET_NULL';
}

// PUT /api/v1/relationships/{id}
// æ›´æ–°å…³ç³»
interface UpdateRelationshipCommand {
  id: string;
  name?: string;
  description?: string;
  type?: 'ONE_TO_ONE' | 'ONE_TO_MANY' | 'MANY_TO_MANY';
  cascadeAction?: 'RESTRICT' | 'CASCADE' | 'SET_NULL';
}

// DELETE /api/v1/relationships/{id}
// åˆ é™¤å…³ç³»
interface DeleteRelationshipCommand {
  id: string;
}
```

#### 3. å…³ç³»éªŒè¯æ¥å£
```typescript
// POST /api/v1/relationships/validate
// éªŒè¯å…³ç³»æ˜¯å¦åˆæ³•
interface ValidateRelationshipCommand {
  sourceEntityId: string;
  targetEntityId: string;
  type: string;
}
```

### éœ€è¦æ‰©å±•çš„æ¥å£

#### 1. å¸ƒå±€ç®¡ç†æ¥å£
```typescript
// POST /api/v1/entities/layout/save
// ä¿å­˜å®ä½“å¸ƒå±€ä¿¡æ¯
interface SaveLayoutCommand {
  projectId: string;
  entities: Array<{
    id: string;
    x: number;
    y: number;
    width?: number;
    height?: number;
  }>;
  relationships: Array<{
    id: string;
    sourcePoint: { x: number; y: number };
    targetPoint: { x: number; y: number };
    controlPoints?: Array<{ x: number; y: number }>;
  }>;
}

// GET /api/v1/entities/layout/{projectId}
// è·å–ä¿å­˜çš„å¸ƒå±€ä¿¡æ¯
interface GetLayoutQuery {
  projectId: string;
}
```

#### 2. æ‰¹é‡æ“ä½œæ¥å£
```typescript
// POST /api/v1/relationships/batch
// æ‰¹é‡åˆ›å»ºå…³ç³»
interface BatchCreateRelationshipsCommand {
  relationships: CreateRelationshipCommand[];
}

// DELETE /api/v1/relationships/batch
// æ‰¹é‡åˆ é™¤å…³ç³»
interface BatchDeleteRelationshipsCommand {
  relationshipIds: string[];
}
```

## å‰ç«¯ç»„ä»¶æ¶æ„è®¾è®¡

### 1. æ ¸å¿ƒç»„ä»¶ç»“æ„

```
å®ä½“å…³ç³»è®¾è®¡å™¨ (EntityRelationshipDesigner.vue)
â”œâ”€â”€ å·¥å…·æ ç»„ä»¶ (DesignerToolbar.vue)
â”‚   â”œâ”€â”€ å¸ƒå±€æ§åˆ¶ (åŠ›å¯¼å‘ã€ç½‘æ ¼ã€å±‚æ¬¡ã€åœ†å½¢)
â”‚   â”œâ”€â”€ è§†å›¾æ§åˆ¶ (ç¼©æ”¾ã€é€‚åº”ã€å°åœ°å›¾)
â”‚   â”œâ”€â”€ å…³ç³»æ¨¡å¼ (è¿æ¥æ¨¡å¼åˆ‡æ¢)
â”‚   â””â”€â”€ æ“ä½œæ§åˆ¶ (ä¿å­˜ã€å¯¼å‡ºã€å¯¼å…¥)
â”œâ”€â”€ ç”»å¸ƒç»„ä»¶ (DesignerCanvas.vue)
â”‚   â”œâ”€â”€ å®ä½“èŠ‚ç‚¹æ¸²æŸ“ (EntityNode.vue)
â”‚   â”œâ”€â”€ å…³ç³»è¿çº¿æ¸²æŸ“ (RelationshipLine.vue)
â”‚   â”œâ”€â”€ è¿æ¥ç‚¹ç®¡ç† (ConnectionPoint.vue)
â”‚   â””â”€â”€ é€‰æ‹©æ¡†ç»„ä»¶ (SelectionBox.vue)
â”œâ”€â”€ å±æ€§é¢æ¿ (PropertyPanel.vue)
â”‚   â”œâ”€â”€ å®ä½“å±æ€§é¢æ¿ (EntityPropertyPanel.vue)
â”‚   â””â”€â”€ å…³ç³»å±æ€§é¢æ¿ (RelationshipPropertyPanel.vue)
â””â”€â”€ å°åœ°å›¾ç»„ä»¶ (MiniMap.vue)
```

### 2. æ•°æ®æ¨¡å‹å®šä¹‰

```typescript
// æ‰©å±•å®ä½“æ¨¡å‹
interface Entity {
  // åŸºç¡€å­—æ®µ
  id: string;
  projectId: string;
  name: string;
  code: string;
  tableName: string;
  description?: string;
  category: string;
  status: 'DRAFT' | 'ACTIVE' | 'INACTIVE';
  fieldCount: number;
  createdAt: string;
  updatedAt: string;
  
  // å¸ƒå±€å­—æ®µ
  x: number;
  y: number;
  width: number;
  height: number;
  color?: string;
  
  // æ‰©å±•å­—æ®µ
  zIndex?: number;
  locked?: boolean;
  visible?: boolean;
  
  // è¿æ¥ç‚¹ä¿¡æ¯
  connectionPoints?: ConnectionPoint[];
}

// å…³ç³»æ¨¡å‹
interface EntityRelationship {
  id: string;
  projectId: string;
  sourceEntityId: string;
  targetEntityId: string;
  type: 'ONE_TO_ONE' | 'ONE_TO_MANY' | 'MANY_TO_MANY';
  name: string;
  description?: string;
  
  // å­—æ®µå…³è”
  sourceFieldName: string;
  targetFieldName: string;
  
  // çº§è”æ“ä½œ
  cascadeAction: 'RESTRICT' | 'CASCADE' | 'SET_NULL';
  
  // è§†è§‰æ ·å¼
  lineStyle: 'solid' | 'dashed' | 'dotted';
  lineColor: string;
  lineWidth: number;
  
  // è¿æ¥ç‚¹å’Œè·¯å¾„
  sourcePoint: Point;
  targetPoint: Point;
  controlPoints?: Point[];
  
  // æ ‡ç­¾ä½ç½®
  labelPosition?: Point;
  
  createdAt: string;
  updatedAt: string;
}

// è¿æ¥ç‚¹æ¨¡å‹
interface ConnectionPoint {
  id: string;
  entityId: string;
  position: 'top' | 'right' | 'bottom' | 'left';
  offset: number; // 0-1 ä¹‹é—´çš„ç›¸å¯¹ä½ç½®
  point: Point; // ç»å¯¹åæ ‡
}

// åæ ‡ç‚¹
interface Point {
  x: number;
  y: number;
}

// å¸ƒå±€é…ç½®
interface LayoutConfig {
  type: 'force' | 'grid' | 'hierarchy' | 'circular';
  options: {
    // åŠ›å¯¼å‘å¸ƒå±€é€‰é¡¹
    force?: {
      strength: number;
      distance: number;
      iterations: number;
    };
    // ç½‘æ ¼å¸ƒå±€é€‰é¡¹
    grid?: {
      columns: number;
      rowSpacing: number;
      columnSpacing: number;
    };
    // å±‚æ¬¡å¸ƒå±€é€‰é¡¹
    hierarchy?: {
      direction: 'TB' | 'BT' | 'LR' | 'RL';
      levelSpacing: number;
      nodeSpacing: number;
    };
    // åœ†å½¢å¸ƒå±€é€‰é¡¹
    circular?: {
      radius: number;
      startAngle: number;
    };
  };
}
```

## å…³é”®åŠŸèƒ½å®ç°æ–¹æ¡ˆ

### 1. å…³ç³»è¿çº¿ç»˜åˆ¶

#### SVG è¿çº¿å®ç°
```vue
<template>
  <svg class="relationship-layer" :viewBox="viewBox">
    <defs>
      <!-- ç®­å¤´æ ‡è®°å®šä¹‰ -->
      <marker
        v-for="marker in arrowMarkers"
        :key="marker.id"
        :id="marker.id"
        :markerWidth="marker.width"
        :markerHeight="marker.height"
        :refX="marker.refX"
        :refY="marker.refY"
        orient="auto"
      >
        <path :d="marker.path" :fill="marker.color" />
      </marker>
    </defs>
    
    <!-- å…³ç³»è¿çº¿ -->
    <g v-for="relationship in relationships" :key="relationship.id">
      <!-- è¿çº¿è·¯å¾„ -->
      <path
        :d="getLinePath(relationship)"
        :stroke="relationship.lineColor"
        :stroke-width="relationship.lineWidth"
        :stroke-dasharray="getStrokeDashArray(relationship.lineStyle)"
        :marker-end="getMarkerEnd(relationship.type)"
        fill="none"
        class="relationship-line"
        @click="selectRelationship(relationship)"
      />
      
      <!-- å…³ç³»æ ‡ç­¾ -->
      <text
        v-if="relationship.name"
        :x="relationship.labelPosition?.x"
        :y="relationship.labelPosition?.y"
        class="relationship-label"
        text-anchor="middle"
        dominant-baseline="middle"
      >
        {{ relationship.name }}
      </text>
      
      <!-- æ§åˆ¶ç‚¹ -->
      <circle
        v-for="(point, index) in relationship.controlPoints"
        :key="index"
        :cx="point.x"
        :cy="point.y"
        r="4"
        class="control-point"
        @mousedown="startDragControlPoint(relationship, index, $event)"
      />
    </g>
    
    <!-- ä¸´æ—¶è¿çº¿ï¼ˆåˆ›å»ºå…³ç³»æ—¶ï¼‰ -->
    <path
      v-if="tempLine"
      :d="tempLine.path"
      stroke="#1976d2"
      stroke-width="2"
      stroke-dasharray="5,5"
      fill="none"
      class="temp-line"
    />
  </svg>
</template>

<script setup lang="ts">
/**
 * å…³ç³»è¿çº¿ç»„ä»¶
 * è´Ÿè´£ç»˜åˆ¶å®ä½“é—´çš„å…³ç³»è¿çº¿ï¼Œæ”¯æŒå¤šç§çº¿æ¡æ ·å¼å’Œäº¤äº’
 */

/**
 * è®¡ç®—è¿çº¿è·¯å¾„
 * @param relationship - å…³ç³»å¯¹è±¡
 * @returns SVG è·¯å¾„å­—ç¬¦ä¸²
 */
function getLinePath(relationship: EntityRelationship): string {
  const { sourcePoint, targetPoint, controlPoints } = relationship;
  
  if (!controlPoints || controlPoints.length === 0) {
    // ç›´çº¿è¿æ¥
    return `M ${sourcePoint.x} ${sourcePoint.y} L ${targetPoint.x} ${targetPoint.y}`;
  }
  
  // è´å¡å°”æ›²çº¿è¿æ¥
  let path = `M ${sourcePoint.x} ${sourcePoint.y}`;
  
  if (controlPoints.length === 1) {
    // äºŒæ¬¡è´å¡å°”æ›²çº¿
    const cp = controlPoints[0];
    path += ` Q ${cp.x} ${cp.y} ${targetPoint.x} ${targetPoint.y}`;
  } else {
    // ä¸‰æ¬¡è´å¡å°”æ›²çº¿æˆ–å¤šæ®µè¿æ¥
    for (let i = 0; i < controlPoints.length; i++) {
      const cp = controlPoints[i];
      if (i === controlPoints.length - 1) {
        path += ` Q ${cp.x} ${cp.y} ${targetPoint.x} ${targetPoint.y}`;
      } else {
        path += ` L ${cp.x} ${cp.y}`;
      }
    }
  }
  
  return path;
}

/**
 * è·å–çº¿æ¡æ ·å¼
 * @param style - çº¿æ¡æ ·å¼ç±»å‹
 * @returns stroke-dasharray å€¼
 */
function getStrokeDashArray(style: string): string {
  switch (style) {
    case 'dashed':
      return '10,5';
    case 'dotted':
      return '2,3';
    default:
      return 'none';
  }
}

/**
 * è·å–ç®­å¤´æ ‡è®°
 * @param type - å…³ç³»ç±»å‹
 * @returns æ ‡è®° ID
 */
function getMarkerEnd(type: string): string {
  switch (type) {
    case 'ONE_TO_ONE':
      return 'url(#arrow-one-to-one)';
    case 'ONE_TO_MANY':
      return 'url(#arrow-one-to-many)';
    case 'MANY_TO_MANY':
      return 'url(#arrow-many-to-many)';
    default:
      return 'url(#arrow-default)';
  }
}
</script>
```

### 2. è¿æ¥ç‚¹è®¡ç®—ç®—æ³•

```typescript
/**
 * è¿æ¥ç‚¹è®¡ç®—æœåŠ¡
 * è´Ÿè´£è®¡ç®—å®ä½“èŠ‚ç‚¹çš„è¿æ¥ç‚¹ä½ç½®å’Œæœ€ä¼˜è¿æ¥è·¯å¾„
 */
class ConnectionPointService {
  /**
   * è®¡ç®—å®ä½“çš„æ‰€æœ‰è¿æ¥ç‚¹
   * @param entity - å®ä½“å¯¹è±¡
   * @returns è¿æ¥ç‚¹æ•°ç»„
   */
  calculateConnectionPoints(entity: Entity): ConnectionPoint[] {
    const { x, y, width, height } = entity;
    const points: ConnectionPoint[] = [];
    
    // æ¯è¾¹åˆ›å»ºå¤šä¸ªè¿æ¥ç‚¹
    const pointsPerSide = 3;
    
    for (let i = 0; i < pointsPerSide; i++) {
      const offset = (i + 1) / (pointsPerSide + 1);
      
      // é¡¶è¾¹
      points.push({
        id: `${entity.id}-top-${i}`,
        entityId: entity.id,
        position: 'top',
        offset,
        point: { x: x + width * offset, y }
      });
      
      // å³è¾¹
      points.push({
        id: `${entity.id}-right-${i}`,
        entityId: entity.id,
        position: 'right',
        offset,
        point: { x: x + width, y: y + height * offset }
      });
      
      // åº•è¾¹
      points.push({
        id: `${entity.id}-bottom-${i}`,
        entityId: entity.id,
        position: 'bottom',
        offset,
        point: { x: x + width * offset, y: y + height }
      });
      
      // å·¦è¾¹
      points.push({
        id: `${entity.id}-left-${i}`,
        entityId: entity.id,
        position: 'left',
        offset,
        point: { x, y: y + height * offset }
      });
    }
    
    return points;
  }
  
  /**
   * æ‰¾åˆ°ä¸¤ä¸ªå®ä½“é—´çš„æœ€ä¼˜è¿æ¥ç‚¹
   * @param sourceEntity - æºå®ä½“
   * @param targetEntity - ç›®æ ‡å®ä½“
   * @returns æœ€ä¼˜è¿æ¥ç‚¹å¯¹
   */
  findOptimalConnectionPoints(
    sourceEntity: Entity,
    targetEntity: Entity
  ): { source: ConnectionPoint; target: ConnectionPoint } {
    const sourcePoints = this.calculateConnectionPoints(sourceEntity);
    const targetPoints = this.calculateConnectionPoints(targetEntity);
    
    let minDistance = Infinity;
    let optimalPair = { source: sourcePoints[0], target: targetPoints[0] };
    
    // è®¡ç®—æ‰€æœ‰è¿æ¥ç‚¹å¯¹çš„è·ç¦»ï¼Œæ‰¾åˆ°æœ€çŸ­çš„
    for (const sourcePoint of sourcePoints) {
      for (const targetPoint of targetPoints) {
        const distance = this.calculateDistance(sourcePoint.point, targetPoint.point);
        if (distance < minDistance) {
          minDistance = distance;
          optimalPair = { source: sourcePoint, target: targetPoint };
        }
      }
    }
    
    return optimalPair;
  }
  
  /**
   * è®¡ç®—ä¸¤ç‚¹é—´è·ç¦»
   * @param p1 - ç‚¹1
   * @param p2 - ç‚¹2
   * @returns è·ç¦»
   */
  private calculateDistance(p1: Point, p2: Point): number {
    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));
  }
  
  /**
   * è®¡ç®—è¿çº¿çš„æ§åˆ¶ç‚¹ï¼ˆç”¨äºé¿å…é‡å ï¼‰
   * @param sourcePoint - æºè¿æ¥ç‚¹
   * @param targetPoint - ç›®æ ‡è¿æ¥ç‚¹
   * @param entities - æ‰€æœ‰å®ä½“ï¼ˆç”¨äºé¿éšœï¼‰
   * @returns æ§åˆ¶ç‚¹æ•°ç»„
   */
  calculateControlPoints(
    sourcePoint: Point,
    targetPoint: Point,
    entities: Entity[]
  ): Point[] {
    // ç®€å•å®ç°ï¼šåœ¨ä¸­ç‚¹æ·»åŠ ä¸€ä¸ªæ§åˆ¶ç‚¹
    const midPoint = {
      x: (sourcePoint.x + targetPoint.x) / 2,
      y: (sourcePoint.y + targetPoint.y) / 2
    };
    
    // æ£€æŸ¥ä¸­ç‚¹æ˜¯å¦ä¸å®ä½“é‡å ï¼Œå¦‚æœé‡å åˆ™è°ƒæ•´ä½ç½®
    const adjustedMidPoint = this.adjustPointToAvoidEntities(midPoint, entities);
    
    return [adjustedMidPoint];
  }
  
  /**
   * è°ƒæ•´ç‚¹ä½ç½®ä»¥é¿å…ä¸å®ä½“é‡å 
   * @param point - åŸå§‹ç‚¹
   * @param entities - å®ä½“æ•°ç»„
   * @returns è°ƒæ•´åçš„ç‚¹
   */
  private adjustPointToAvoidEntities(point: Point, entities: Entity[]): Point {
    for (const entity of entities) {
      if (this.isPointInEntity(point, entity)) {
        // å¦‚æœç‚¹åœ¨å®ä½“å†…ï¼Œå°†å…¶ç§»åŠ¨åˆ°å®ä½“å¤–
        const entityCenter = {
          x: entity.x + entity.width / 2,
          y: entity.y + entity.height / 2
        };
        
        // è®¡ç®—ä»å®ä½“ä¸­å¿ƒåˆ°ç‚¹çš„æ–¹å‘
        const dx = point.x - entityCenter.x;
        const dy = point.y - entityCenter.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance > 0) {
          // å°†ç‚¹ç§»åŠ¨åˆ°å®ä½“è¾¹ç•Œå¤–
          const margin = 20; // è¾¹è·
          const newDistance = Math.max(entity.width, entity.height) / 2 + margin;
          return {
            x: entityCenter.x + (dx / distance) * newDistance,
            y: entityCenter.y + (dy / distance) * newDistance
          };
        }
      }
    }
    
    return point;
  }
  
  /**
   * æ£€æŸ¥ç‚¹æ˜¯å¦åœ¨å®ä½“å†…
   * @param point - ç‚¹
   * @param entity - å®ä½“
   * @returns æ˜¯å¦åœ¨å®ä½“å†…
   */
  private isPointInEntity(point: Point, entity: Entity): boolean {
    return (
      point.x >= entity.x &&
      point.x <= entity.x + entity.width &&
      point.y >= entity.y &&
      point.y <= entity.y + entity.height
    );
  }
}
```

### 3. è‡ªåŠ¨å¸ƒå±€ç®—æ³•ä¼˜åŒ–

```typescript
/**
 * å¢å¼ºçš„å¸ƒå±€ç®—æ³•æœåŠ¡
 * æ”¯æŒå¤šç§å¸ƒå±€ç®—æ³•ï¼Œè€ƒè™‘å®ä½“å…³ç³»è¿›è¡Œæ™ºèƒ½å¸ƒå±€
 */
class EnhancedLayoutService {
  /**
   * åŠ›å¯¼å‘å¸ƒå±€ç®—æ³•
   * @param entities - å®ä½“æ•°ç»„
   * @param relationships - å…³ç³»æ•°ç»„
   * @param options - å¸ƒå±€é€‰é¡¹
   * @returns å¸ƒå±€åçš„å®ä½“ä½ç½®
   */
  forceDirectedLayout(
    entities: Entity[],
    relationships: EntityRelationship[],
    options: LayoutConfig['options']['force'] = {
      strength: 0.1,
      distance: 200,
      iterations: 100
    }
  ): Map<string, Point> {
    const positions = new Map<string, Point>();
    const velocities = new Map<string, Point>();
    
    // åˆå§‹åŒ–éšæœºä½ç½®
    entities.forEach(entity => {
      positions.set(entity.id, {
        x: Math.random() * 800 + 100,
        y: Math.random() * 600 + 100
      });
      velocities.set(entity.id, { x: 0, y: 0 });
    });
    
    // è¿­ä»£è®¡ç®—åŠ›çš„ä½œç”¨
    for (let i = 0; i < options.iterations; i++) {
      // è®¡ç®—æ’æ–¥åŠ›ï¼ˆæ‰€æœ‰å®ä½“é—´ï¼‰
      this.calculateRepulsiveForces(entities, positions, velocities, options);
      
      // è®¡ç®—å¸å¼•åŠ›ï¼ˆæœ‰å…³ç³»çš„å®ä½“é—´ï¼‰
      this.calculateAttractiveForces(relationships, positions, velocities, options);
      
      // æ›´æ–°ä½ç½®
      this.updatePositions(entities, positions, velocities);
      
      // åº”ç”¨è¾¹ç•Œçº¦æŸ
      this.applyBoundaryConstraints(entities, positions);
    }
    
    return positions;
  }
  
  /**
   * å±‚æ¬¡å¸ƒå±€ç®—æ³•
   * @param entities - å®ä½“æ•°ç»„
   * @param relationships - å…³ç³»æ•°ç»„
   * @param options - å¸ƒå±€é€‰é¡¹
   * @returns å¸ƒå±€åçš„å®ä½“ä½ç½®
   */
  hierarchicalLayout(
    entities: Entity[],
    relationships: EntityRelationship[],
    options: LayoutConfig['options']['hierarchy'] = {
      direction: 'TB',
      levelSpacing: 150,
      nodeSpacing: 100
    }
  ): Map<string, Point> {
    const positions = new Map<string, Point>();
    
    // æ„å»ºä¾èµ–å›¾
    const graph = this.buildDependencyGraph(entities, relationships);
    
    // æ‹“æ‰‘æ’åºç¡®å®šå±‚çº§
    const levels = this.topologicalSort(graph);
    
    // æŒ‰å±‚çº§å¸ƒå±€
    levels.forEach((level, levelIndex) => {
      const y = levelIndex * options.levelSpacing;
      const totalWidth = (level.length - 1) * options.nodeSpacing;
      const startX = -totalWidth / 2;
      
      level.forEach((entityId, nodeIndex) => {
        const x = startX + nodeIndex * options.nodeSpacing;
        positions.set(entityId, { x, y });
      });
    });
    
    return positions;
  }
  
  /**
   * æ™ºèƒ½ç½‘æ ¼å¸ƒå±€
   * @param entities - å®ä½“æ•°ç»„
   * @param relationships - å…³ç³»æ•°ç»„
   * @param options - å¸ƒå±€é€‰é¡¹
   * @returns å¸ƒå±€åçš„å®ä½“ä½ç½®
   */
  intelligentGridLayout(
    entities: Entity[],
    relationships: EntityRelationship[],
    options: LayoutConfig['options']['grid'] = {
      columns: 4,
      rowSpacing: 150,
      columnSpacing: 200
    }
  ): Map<string, Point> {
    const positions = new Map<string, Point>();
    
    // æ ¹æ®å…³ç³»å¯†åº¦å¯¹å®ä½“è¿›è¡Œèšç±»
    const clusters = this.clusterEntitiesByRelationships(entities, relationships);
    
    let currentRow = 0;
    let currentCol = 0;
    
    // æŒ‰èšç±»å¸ƒå±€å®ä½“
    clusters.forEach(cluster => {
      cluster.forEach(entity => {
        const x = currentCol * options.columnSpacing;
        const y = currentRow * options.rowSpacing;
        positions.set(entity.id, { x, y });
        
        currentCol++;
        if (currentCol >= options.columns) {
          currentCol = 0;
          currentRow++;
        }
      });
    });
    
    return positions;
  }
  
  /**
   * æ ¹æ®å…³ç³»å¯¹å®ä½“è¿›è¡Œèšç±»
   * @param entities - å®ä½“æ•°ç»„
   * @param relationships - å…³ç³»æ•°ç»„
   * @returns èšç±»ç»“æœ
   */
  private clusterEntitiesByRelationships(
    entities: Entity[],
    relationships: EntityRelationship[]
  ): Entity[][] {
    // æ„å»ºé‚»æ¥è¡¨
    const adjacencyList = new Map<string, Set<string>>();
    entities.forEach(entity => {
      adjacencyList.set(entity.id, new Set());
    });
    
    relationships.forEach(rel => {
      adjacencyList.get(rel.sourceEntityId)?.add(rel.targetEntityId);
      adjacencyList.get(rel.targetEntityId)?.add(rel.sourceEntityId);
    });
    
    // ä½¿ç”¨å¹¶æŸ¥é›†è¿›è¡Œèšç±»
    const clusters: Entity[][] = [];
    const visited = new Set<string>();
    
    entities.forEach(entity => {
      if (!visited.has(entity.id)) {
        const cluster = this.dfsCluster(entity.id, adjacencyList, visited, entities);
        if (cluster.length > 0) {
          clusters.push(cluster);
        }
      }
    });
    
    return clusters;
  }
  
  /**
   * æ·±åº¦ä¼˜å…ˆæœç´¢èšç±»
   * @param entityId - èµ·å§‹å®ä½“ID
   * @param adjacencyList - é‚»æ¥è¡¨
   * @param visited - å·²è®¿é—®é›†åˆ
   * @param entities - å®ä½“æ•°ç»„
   * @returns èšç±»
   */
  private dfsCluster(
    entityId: string,
    adjacencyList: Map<string, Set<string>>,
    visited: Set<string>,
    entities: Entity[]
  ): Entity[] {
    const cluster: Entity[] = [];
    const stack = [entityId];
    
    while (stack.length > 0) {
      const currentId = stack.pop()!;
      if (visited.has(currentId)) continue;
      
      visited.add(currentId);
      const entity = entities.find(e => e.id === currentId);
      if (entity) {
        cluster.push(entity);
      }
      
      // æ·»åŠ ç›¸é‚»å®ä½“åˆ°æ ˆä¸­
      const neighbors = adjacencyList.get(currentId) || new Set();
      neighbors.forEach(neighborId => {
        if (!visited.has(neighborId)) {
          stack.push(neighborId);
        }
      });
    }
    
    return cluster;
  }
}
```

### 4. æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

#### è™šæ‹ŸåŒ–æ¸²æŸ“
```typescript
/**
 * è™šæ‹ŸåŒ–æ¸²æŸ“æœåŠ¡
 * åªæ¸²æŸ“è§†å£å†…çš„å®ä½“å’Œå…³ç³»ï¼Œæå‡å¤§é‡æ•°æ®çš„æ¸²æŸ“æ€§èƒ½
 */
class VirtualizationService {
  private viewportBounds: {
    left: number;
    top: number;
    right: number;
    bottom: number;
  } = { left: 0, top: 0, right: 0, bottom: 0 };
  
  /**
   * æ›´æ–°è§†å£è¾¹ç•Œ
   * @param viewport - è§†å£ä¿¡æ¯
   */
  updateViewport(viewport: {
    x: number;
    y: number;
    width: number;
    height: number;
    scale: number;
  }) {
    const margin = 100; // é¢„åŠ è½½è¾¹è·
    this.viewportBounds = {
      left: viewport.x - margin,
      top: viewport.y - margin,
      right: viewport.x + viewport.width / viewport.scale + margin,
      bottom: viewport.y + viewport.height / viewport.scale + margin
    };
  }
  
  /**
   * è¿‡æ»¤è§†å£å†…çš„å®ä½“
   * @param entities - æ‰€æœ‰å®ä½“
   * @returns è§†å£å†…çš„å®ä½“
   */
  getVisibleEntities(entities: Entity[]): Entity[] {
    return entities.filter(entity => this.isEntityVisible(entity));
  }
  
  /**
   * è¿‡æ»¤è§†å£å†…çš„å…³ç³»
   * @param relationships - æ‰€æœ‰å…³ç³»
   * @param entities - å®ä½“æ˜ å°„
   * @returns è§†å£å†…çš„å…³ç³»
   */
  getVisibleRelationships(
    relationships: EntityRelationship[],
    entities: Map<string, Entity>
  ): EntityRelationship[] {
    return relationships.filter(rel => {
      const sourceEntity = entities.get(rel.sourceEntityId);
      const targetEntity = entities.get(rel.targetEntityId);
      
      return (
        (sourceEntity && this.isEntityVisible(sourceEntity)) ||
        (targetEntity && this.isEntityVisible(targetEntity))
      );
    });
  }
  
  /**
   * æ£€æŸ¥å®ä½“æ˜¯å¦åœ¨è§†å£å†…
   * @param entity - å®ä½“
   * @returns æ˜¯å¦å¯è§
   */
  private isEntityVisible(entity: Entity): boolean {
    return !(
      entity.x + entity.width < this.viewportBounds.left ||
      entity.x > this.viewportBounds.right ||
      entity.y + entity.height < this.viewportBounds.top ||
      entity.y > this.viewportBounds.bottom
    );
  }
}
```

#### äº‹ä»¶ä¼˜åŒ–
```typescript
/**
 * äº‹ä»¶ä¼˜åŒ–æœåŠ¡
 * æä¾›é˜²æŠ–ã€èŠ‚æµå’Œäº‹ä»¶å§”æ‰˜ç­‰ä¼˜åŒ–åŠŸèƒ½
 */
class EventOptimizationService {
  private debounceTimers = new Map<string, number>();
  private throttleTimers = new Map<string, number>();
  
  /**
   * é˜²æŠ–å‡½æ•°
   * @param key - å”¯ä¸€é”®
   * @param fn - æ‰§è¡Œå‡½æ•°
   * @param delay - å»¶è¿Ÿæ—¶é—´
   */
  debounce(key: string, fn: Function, delay: number = 300) {
    const existingTimer = this.debounceTimers.get(key);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    
    const timer = window.setTimeout(() => {
      fn();
      this.debounceTimers.delete(key);
    }, delay);
    
    this.debounceTimers.set(key, timer);
  }
  
  /**
   * èŠ‚æµå‡½æ•°
   * @param key - å”¯ä¸€é”®
   * @param fn - æ‰§è¡Œå‡½æ•°
   * @param interval - é—´éš”æ—¶é—´
   */
  throttle(key: string, fn: Function, interval: number = 100) {
    if (this.throttleTimers.has(key)) {
      return;
    }
    
    fn();
    
    const timer = window.setTimeout(() => {
      this.throttleTimers.delete(key);
    }, interval);
    
    this.throttleTimers.set(key, timer);
  }
  
  /**
   * RAF ä¼˜åŒ–çš„åŠ¨ç”»å‡½æ•°
   * @param fn - åŠ¨ç”»å‡½æ•°
   */
  requestAnimationFrame(fn: Function) {
    requestAnimationFrame(() => fn());
  }
}
```

## å¼€å‘ä»»åŠ¡åˆ†è§£

### ç¬¬ä¸€é˜¶æ®µï¼šå…³ç³»è¿çº¿åŸºç¡€åŠŸèƒ½ (3å¤©)

#### ä»»åŠ¡1.1ï¼šå…³ç³»è¿çº¿ç»„ä»¶å¼€å‘
- **æ–‡ä»¶**: `RelationshipLine.vue`
- **åŠŸèƒ½**: SVGè¿çº¿ç»˜åˆ¶ã€å¤šç§çº¿æ¡æ ·å¼ã€ç®­å¤´æ ‡è®°
- **éªŒæ”¶**: èƒ½å¤Ÿç»˜åˆ¶åŸºæœ¬çš„å®ä½“å…³ç³»è¿çº¿

#### ä»»åŠ¡1.2ï¼šè¿æ¥ç‚¹è®¡ç®—æœåŠ¡
- **æ–‡ä»¶**: `ConnectionPointService.ts`
- **åŠŸèƒ½**: è¿æ¥ç‚¹è®¡ç®—ã€æœ€ä¼˜è·¯å¾„é€‰æ‹©ã€é¿éšœç®—æ³•
- **éªŒæ”¶**: è¿çº¿èƒ½å¤Ÿæ™ºèƒ½é€‰æ‹©æœ€ä¼˜è¿æ¥ç‚¹

#### ä»»åŠ¡1.3ï¼šå…³ç³»åˆ›å»ºäº¤äº’
- **æ–‡ä»¶**: `EnhancedEntityDesigner.vue`
- **åŠŸèƒ½**: æ‹–æ‹½åˆ›å»ºå…³ç³»ã€ä¸´æ—¶è¿çº¿æ˜¾ç¤ºã€å…³ç³»éªŒè¯
- **éªŒæ”¶**: ç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–æ‹½åˆ›å»ºå®ä½“å…³ç³»

### ç¬¬äºŒé˜¶æ®µï¼šå…³ç³»ç®¡ç†å®Œå–„ (2å¤©)

#### ä»»åŠ¡2.1ï¼šå…³ç³»ç¼–è¾‘åŠŸèƒ½
- **æ–‡ä»¶**: `RelationshipPropertyPanel.vue`
- **åŠŸèƒ½**: å…³ç³»å±æ€§ç¼–è¾‘ã€æ ·å¼é…ç½®ã€éªŒè¯è§„åˆ™
- **éªŒæ”¶**: å¯ä»¥ç¼–è¾‘å…³ç³»çš„æ‰€æœ‰å±æ€§

#### ä»»åŠ¡2.2ï¼šå…³ç³»æ“ä½œåŠŸèƒ½
- **æ–‡ä»¶**: `RelationshipContextMenu.vue`
- **åŠŸèƒ½**: å³é”®èœå•ã€åˆ é™¤å…³ç³»ã€å¤åˆ¶å…³ç³»
- **éªŒæ”¶**: æ”¯æŒå®Œæ•´çš„å…³ç³»æ“ä½œæµç¨‹

#### ä»»åŠ¡2.3ï¼šæ‰¹é‡å…³ç³»ç®¡ç†
- **æ–‡ä»¶**: `BatchRelationshipManager.vue`
- **åŠŸèƒ½**: æ‰¹é‡åˆ›å»ºã€æ‰¹é‡åˆ é™¤ã€å…³ç³»å¯¼å…¥å¯¼å‡º
- **éªŒæ”¶**: æ”¯æŒæ‰¹é‡æ“ä½œå…³ç³»

### ç¬¬ä¸‰é˜¶æ®µï¼šå¸ƒå±€å’ŒæŒä¹…åŒ– (2å¤©)

#### ä»»åŠ¡3.1ï¼šå¸ƒå±€çŠ¶æ€ç®¡ç†
- **æ–‡ä»¶**: `LayoutStateManager.ts`
- **åŠŸèƒ½**: å¸ƒå±€çŠ¶æ€ä¿å­˜ã€æ¢å¤ã€ç‰ˆæœ¬ç®¡ç†
- **éªŒæ”¶**: å¸ƒå±€ä¿¡æ¯èƒ½å¤ŸæŒä¹…åŒ–ä¿å­˜

#### ä»»åŠ¡3.2ï¼šåç«¯å¸ƒå±€æ¥å£
- **æ–‡ä»¶**: `layout.controller.ts`, `layout.service.ts`
- **åŠŸèƒ½**: å¸ƒå±€æ•°æ®å­˜å‚¨ã€æŸ¥è¯¢ã€æ›´æ–°æ¥å£
- **éªŒæ”¶**: å‰åç«¯å¸ƒå±€æ•°æ®åŒæ­¥

#### ä»»åŠ¡3.3ï¼šè‡ªåŠ¨å¸ƒå±€ä¼˜åŒ–
- **æ–‡ä»¶**: `EnhancedLayoutService.ts`
- **åŠŸèƒ½**: æ™ºèƒ½å¸ƒå±€ç®—æ³•ã€å…³ç³»æ„ŸçŸ¥å¸ƒå±€ã€å†²çªè§£å†³
- **éªŒæ”¶**: å¸ƒå±€ç®—æ³•è€ƒè™‘å…³ç³»è¿›è¡Œä¼˜åŒ–

### ç¬¬å››é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ– (2å¤©)

#### ä»»åŠ¡4.1ï¼šè™šæ‹ŸåŒ–æ¸²æŸ“
- **æ–‡ä»¶**: `VirtualizationService.ts`
- **åŠŸèƒ½**: è§†å£è£å‰ªã€æŒ‰éœ€æ¸²æŸ“ã€æ€§èƒ½ç›‘æ§
- **éªŒæ”¶**: æ”¯æŒ1000+å®ä½“æµç•…æ¸²æŸ“

#### ä»»åŠ¡4.2ï¼šäº‹ä»¶ä¼˜åŒ–
- **æ–‡ä»¶**: `EventOptimizationService.ts`
- **åŠŸèƒ½**: é˜²æŠ–èŠ‚æµã€äº‹ä»¶å§”æ‰˜ã€RAFä¼˜åŒ–
- **éªŒæ”¶**: äº¤äº’å“åº”æ—¶é—´<100ms

#### ä»»åŠ¡4.3ï¼šå†…å­˜ç®¡ç†
- **æ–‡ä»¶**: å„ç»„ä»¶çš„æ¸…ç†é€»è¾‘
- **åŠŸèƒ½**: ç»„ä»¶é”€æ¯æ¸…ç†ã€å†…å­˜æ³„æ¼æ£€æµ‹
- **éªŒæ”¶**: é•¿æ—¶é—´ä½¿ç”¨æ— å†…å­˜æ³„æ¼

### ç¬¬äº”é˜¶æ®µï¼šæµ‹è¯•å’Œæ–‡æ¡£ (1å¤©)

#### ä»»åŠ¡5.1ï¼šå•å…ƒæµ‹è¯•
- **æ–‡ä»¶**: `*.spec.ts`
- **åŠŸèƒ½**: ç»„ä»¶æµ‹è¯•ã€æœåŠ¡æµ‹è¯•ã€ç®—æ³•æµ‹è¯•
- **éªŒæ”¶**: æµ‹è¯•è¦†ç›–ç‡>80%

#### ä»»åŠ¡5.2ï¼šé›†æˆæµ‹è¯•
- **æ–‡ä»¶**: `e2e/*.spec.ts`
- **åŠŸèƒ½**: ç«¯åˆ°ç«¯æµ‹è¯•ã€ç”¨æˆ·æµç¨‹æµ‹è¯•
- **éªŒæ”¶**: ä¸»è¦åŠŸèƒ½æµç¨‹æµ‹è¯•é€šè¿‡

#### ä»»åŠ¡5.3ï¼šæ€§èƒ½æµ‹è¯•
- **æ–‡ä»¶**: `performance/*.spec.ts`
- **åŠŸèƒ½**: æ€§èƒ½åŸºå‡†æµ‹è¯•ã€å‹åŠ›æµ‹è¯•
- **éªŒæ”¶**: æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°é¢„æœŸ

## éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] å®ä½“å…³ç³»è¿çº¿å¯è§†åŒ–æ˜¾ç¤º
- [ ] æ”¯æŒæ‹–æ‹½åˆ›å»ºå®ä½“å…³ç³»
- [ ] å…³ç³»å±æ€§å¯ç¼–è¾‘ï¼ˆç±»å‹ã€æ ·å¼ã€çº§è”ç­‰ï¼‰
- [ ] å¤šç§è‡ªåŠ¨å¸ƒå±€ç®—æ³•ï¼Œè€ƒè™‘å…³ç³»ä¼˜åŒ–
- [ ] å¸ƒå±€çŠ¶æ€å¯ä¿å­˜å’Œæ¢å¤
- [ ] æ”¯æŒ1000+å®ä½“å’Œå…³ç³»æµç•…æ¸²æŸ“
- [ ] å…³ç³»æ•°æ®å‰åç«¯åŒæ­¥
- [ ] æ‰¹é‡å…³ç³»æ“ä½œåŠŸèƒ½

### æ€§èƒ½éªŒæ”¶
- [ ] 1000ä¸ªå®ä½“æ¸²æŸ“æ—¶é—´<2ç§’
- [ ] æ‹–æ‹½æ“ä½œå“åº”æ—¶é—´<50ms
- [ ] å¸ƒå±€è®¡ç®—æ—¶é—´<1ç§’
- [ ] å†…å­˜ä½¿ç”¨ç¨³å®šï¼Œæ— æ³„æ¼
- [ ] ç¼©æ”¾æ“ä½œæµç•…ï¼Œæ— å¡é¡¿

### è´¨é‡éªŒæ”¶
- [ ] æ— TypeScriptç±»å‹é”™è¯¯
- [ ] æ— ESLintè­¦å‘Š
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡>80%
- [ ] é›†æˆæµ‹è¯•è¦†ç›–ä¸»è¦åŠŸèƒ½
- [ ] ä»£ç æ³¨é‡Šå®Œæ•´ï¼Œç¬¦åˆè§„èŒƒ

## é£é™©è¯„ä¼°å’Œç¼“è§£

### æŠ€æœ¯é£é™©
1. **SVGæ€§èƒ½é—®é¢˜**
   - é£é™©ï¼šå¤§é‡è¿çº¿å¯¼è‡´SVGæ¸²æŸ“æ€§èƒ½ä¸‹é™
   - ç¼“è§£ï¼šè™šæ‹ŸåŒ–æ¸²æŸ“ã€Canvasé™çº§æ–¹æ¡ˆ

2. **å¸ƒå±€ç®—æ³•å¤æ‚åº¦**
   - é£é™©ï¼šå¤æ‚å…³ç³»ç½‘ç»œçš„å¸ƒå±€è®¡ç®—è€—æ—¶
   - ç¼“è§£ï¼šç®—æ³•ä¼˜åŒ–ã€Web Workerå¼‚æ­¥è®¡ç®—

3. **çŠ¶æ€ç®¡ç†å¤æ‚æ€§**
   - é£é™©ï¼šå®ä½“å’Œå…³ç³»çŠ¶æ€åŒæ­¥å›°éš¾
   - ç¼“è§£ï¼šç»Ÿä¸€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶é©±åŠ¨æ¶æ„

### ä¸šåŠ¡é£é™©
1. **ç”¨æˆ·å­¦ä¹ æˆæœ¬**
   - é£é™©ï¼šå¤æ‚çš„å…³ç³»ç®¡ç†ç•Œé¢å­¦ä¹ æˆæœ¬é«˜
   - ç¼“è§£ï¼šæ¸è¿›å¼åŠŸèƒ½å¼€æ”¾ã€ç”¨æˆ·å¼•å¯¼

2. **æ•°æ®ä¸€è‡´æ€§**
   - é£é™©ï¼šå‰åç«¯å…³ç³»æ•°æ®ä¸ä¸€è‡´
   - ç¼“è§£ï¼šä¹è§‚é”ã€å†²çªæ£€æµ‹å’Œè§£å†³

## æ€»ç»“

æœ¬æ–¹æ¡ˆæä¾›äº†å®Œæ•´çš„å®ä½“å…³ç³»ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œä»åŸºç¡€çš„è¿çº¿ç»˜åˆ¶åˆ°é«˜çº§çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæ¶µç›–äº†å‰åç«¯çš„å®Œæ•´å®ç°ã€‚é€šè¿‡åˆ†é˜¶æ®µçš„å¼€å‘æ–¹å¼ï¼Œç¡®ä¿æ¯ä¸ªåŠŸèƒ½ç‚¹éƒ½èƒ½å¾—åˆ°å……åˆ†çš„å¼€å‘å’Œæµ‹è¯•ã€‚

å…³é”®æˆåŠŸå› ç´ ï¼š
1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹å¼€å‘ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤
2. **æ€§èƒ½ä¼˜å…ˆ**ï¼šä»è®¾è®¡é˜¶æ®µå°±è€ƒè™‘æ€§èƒ½ä¼˜åŒ–
3. **ç”¨æˆ·ä½“éªŒ**ï¼šæ³¨é‡äº¤äº’ç»†èŠ‚å’Œè§†è§‰æ•ˆæœ
4. **å¯æ‰©å±•æ€§**ï¼šä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•é¢„ç•™æ¥å£
5. **è´¨é‡ä¿è¯**ï¼šå®Œå–„çš„æµ‹è¯•è¦†ç›–å’Œä»£ç è§„èŒƒ

é€šè¿‡è¿™ä¸ªæ–¹æ¡ˆçš„å®æ–½ï¼Œå°†èƒ½å¤Ÿäº¤ä»˜ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ€§èƒ½ä¼˜å¼‚çš„å®ä½“å…³ç³»ç®¡ç†ç³»ç»Ÿï¼Œæ»¡è¶³ç”¨æˆ·å¯¹å¯è§†åŒ–æ•°æ®å»ºæ¨¡çš„æ‰€æœ‰éœ€æ±‚ã€‚